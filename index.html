<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Juego de Baile PRO RSTV</title>
<style>
body {
  margin: 0;
  font-family: "Poppins", sans-serif;
  background: linear-gradient(135deg,#000,#111);
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow: hidden;
}
h1 {
  margin-top: 20px;
  text-align: center;
  background: linear-gradient(90deg,#d4af37,#b8860b);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
#game {
  position: relative;
  width: 300px;
  height: 500px;
  background: rgba(0,0,0,0.85);
  border: 2px solid #d4af37;
  margin-top: 20px;
  overflow: hidden;
}
.hit-zone {
  position: absolute;
  bottom: 20px;
  width: 100%;
  height: 50px;
  border-top: 2px solid #d4af37;
  display: flex;
  justify-content: space-around;
}
.arrow {
  width: 50px;
  height: 50px;
  text-align: center;
  line-height: 50px;
  font-size: 2rem;
  font-weight: bold;
  color: #d4af37;
  border: 2px solid #b8860b;
  border-radius: 8px;
  position: absolute;
  top: 0;
  transition: top 0.02s linear, transform 0.2s ease;
}
.arrow.hit {
  animation: hitFlash 0.3s forwards;
}
@keyframes hitFlash {
  0% { transform: scale(1); color: #d4af37;}
  50% { transform: scale(1.3); color: #fff;}
  100% { transform: scale(1); color: #d4af37;}
}
#score {
  margin-top: 20px;
  font-size: 1.2rem;
  color: #d4af37;
}
</style>
</head>
<body>

<h1>RSTV Social Dance PRO</h1>
<div id="game">
  <div class="hit-zone">
    <div>↑</div>
    <div>↓</div>
    <div>←</div>
    <div>→</div>
  </div>
</div>
<div id="score">Puntaje: 0 | Combo: 0</div>

<!-- Música opcional -->
<audio id="music" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" autoplay loop></audio>

<script>
const game = document.getElementById("game");
const scoreDisplay = document.getElementById("score");
const music = document.getElementById("music");

const keys = ["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"];
const symbols = ["↑","↓","←","→"];
let arrows = [];
let score = 0;
let combo = 0;
let speed = 3;
let intervalCreate = 1000;

const hitStart = 420;
const hitEnd = 470;

// Crear flecha
function createArrow(){
  const index = Math.floor(Math.random()*4);
  const key = keys[index];
  const symbol = symbols[index];
  const arrow = document.createElement("div");
  arrow.classList.add("arrow");
  arrow.textContent = symbol;
  arrow.dataset.key = key;
  arrow.style.left = 60*index + "px";
  arrow.style.top = "-60px";
  game.appendChild(arrow);
  arrows.push(arrow);
}

// Mover flechas
function moveArrows(){
  arrows.forEach((arrow,i)=>{
    let top = parseInt(arrow.style.top);
    arrow.style.top = top + speed + "px";

    if(top > game.clientHeight){
      game.removeChild(arrow);
      arrows.splice(i,1);
      combo = 0;
      score -= 5;
      updateScore();
    }
  });
}

// Detectar aciertos
document.addEventListener("keydown",(e)=>{
  arrows.forEach((arrow,i)=>{
    let top = parseInt(arrow.style.top);
    if(e.key === arrow.dataset.key && top >= hitStart && top <= hitEnd){
      // Animación hit
      arrow.classList.add("hit");
      setTimeout(()=>arrow.remove(),300);
      arrows.splice(i,1);
      score += 10 + combo*2;
      combo += 1;
      updateScore();
      speed += 0.05; // aumenta velocidad progresiva
      if(intervalCreate>400) intervalCreate -=5; // aumenta frecuencia
    }
  });
});

function updateScore(){
  scoreDisplay.textContent = `Puntaje: ${score} | Combo: ${combo}`;
}

// Loop de movimiento
setInterval(moveArrows,20);

// Loop de creación de flechas con velocidad progresiva
function arrowLoop(){
  createArrow();
  setTimeout(arrowLoop, intervalCreate);
}
arrowLoop();
</script>

</body>
</html>